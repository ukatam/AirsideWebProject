{"version":3,"sources":["../../../../src/ngx-modialog/src/overlay/overlay.service.ts"],"names":[],"mappings":"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","file":"overlay.service.js","sourceRoot":"","sourcesContent":["import { ViewContainerRef, Injectable, Injector } from '@angular/core';\n\nimport { OverlayRenderer, OverlayConfig } from '../models/tokens';\nimport { DialogRefStack } from '../models/dialog-ref-stack';\nimport { vcRefStore } from '../models/vc-ref-store';\nimport { DialogRef } from '../models/dialog-ref';\nimport { OverlayContext } from '../models/overlay-context';\n\nconst /** @type {?} */ _stack = new DialogRefStack<any>();\nexport class Overlay {\n/**\n * @return {?}\n */\nget stackLength(): number {\n    return _stack.length;\n  }\n/**\n * @param {?} _modalRenderer\n * @param {?} injector\n */\nconstructor(private _modalRenderer: OverlayRenderer, protected injector: Injector) {\n  }\n/**\n * Check if a given DialogRef is the top most ref in the stack.\n * TODO: distinguish between body modal vs in element modal.\n * @param {?} dialogRef\n * @return {?}\n */\nisTopMost(dialogRef: DialogRef<any>): boolean {\n    return _stack.indexOf(dialogRef) === _stack.length - 1;\n  }\n/**\n * @param {?} dialogRef\n * @return {?}\n */\nstackPosition(dialogRef: DialogRef<any>) {\n    return _stack.indexOf(dialogRef);\n  }\n/**\n * @param {?} dialogRef\n * @return {?}\n */\ngroupStackLength(dialogRef: DialogRef<any>): number {\n    return _stack.groupLength(_stack.groupOf(dialogRef));\n  }\n/**\n * @param {?=} result\n * @return {?}\n */\ncloseAll(result: any = null): void {\n      _stack.closeAll(result);\n  }\n/**\n * Creates an overlay and returns a dialog ref.\n * @template T\n * @param {?} config instructions how to create the overlay\n * @param {?=} group A token to associate the new overlay with, used for reference (stacks usually)\n * @return {?}\n */\nopen<T extends OverlayContext>(config: OverlayConfig, group?: any): DialogRef<T>[] {\n    let /** @type {?} */ viewContainer = config.viewContainer, /** @type {?} */\n        containers: Array<ViewContainerRef> = [];\n\n    if (typeof viewContainer === 'string') {\n      containers = vcRefStore.getVCRef( /** @type {?} */((viewContainer as string)));\n    } else if (Array.isArray(viewContainer)) {\n      containers = /** @type {?} */(( viewContainer as any));\n    } else if (viewContainer) {\n      containers = /** @type {?} */(( [viewContainer] as any));\n    } else {\n      containers = [null];\n    }\n\n    return containers\n      .map( vc => this.createOverlay(config.renderer || this._modalRenderer, vc, config, group));\n  }\n/**\n * @param {?} renderer\n * @param {?} vcRef\n * @param {?} config\n * @param {?} group\n * @return {?}\n */\nprivate createOverlay(renderer: OverlayRenderer,\n                        vcRef: ViewContainerRef,\n                        config: OverlayConfig,\n                        group: any): DialogRef<any> {\n\n    if (config.context) {\n      config.context.normalize();\n    }\n\n    if (!config.injector) {\n      config.injector = this.injector;\n    }\n\n    let /** @type {?} */ dialog = new DialogRef<any>(this, config.context || {});\n    dialog.inElement = config.context && !!config.context.inElement;\n\n    let /** @type {?} */ cmpRef = renderer.render(dialog, vcRef, config.injector);\n\n    Object.defineProperty(dialog, 'overlayRef', {value: cmpRef});\n    _stack.pushManaged(dialog, group);\n\n    return dialog;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: OverlayRenderer, },\n{type: Injector, },\n];\n}\n\nfunction Overlay_tsickle_Closure_declarations() {\n/** @type {?} */\nOverlay.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nOverlay.ctorParameters;\n/** @type {?} */\nOverlay.prototype._modalRenderer;\n/** @type {?} */\nOverlay.prototype.injector;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}