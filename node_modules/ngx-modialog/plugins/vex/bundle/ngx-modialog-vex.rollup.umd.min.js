!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/operator/combineLatest"),require("@angular/core"),require("ngx-modialog"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","rxjs/operator/combineLatest","@angular/core","ngx-modialog","@angular/common"],e):e((t.ngxModialog=t.ngxModialog||{},t.ngxModialog.vex=t.ngxModialog.vex||{}),t.Rx.Observable.prototype,t.ng.core,t.ngxModialog,t.ng.common)}(this,function(t,e,n,o,r){"use strict";var i=function(){function t(){this.onButtonClick=new n.EventEmitter}return t.prototype.onClick=function(t,e){e.stopPropagation(),this.onButtonClick.emit({btn:t,$event:e})},t.decorators=[{type:n.Component,args:[{selector:"vex-dialog-buttons",encapsulation:n.ViewEncapsulation.None,template:'<div class="vex-dialog-buttons">\n    <button type="button" \n         *ngFor="let btn of buttons;"\n         [class]="btn.cssClass"\n         (click)="onClick(btn, $event)">{{btn.caption}}</button>\n</div>'}]}],t.ctorParameters=function(){return[]},t.propDecorators={buttons:[{type:n.Input}],onButtonClick:[{type:n.Output}]},t}(),s=function(){function t(t){this.dialog=t,this.context=t.context}return t.prototype.onButtonClick=function(t){t.btn.onClick(this,t.$event)},t.decorators=[{type:n.Component,args:[{selector:"modal-dialog",encapsulation:n.ViewEncapsulation.None,template:'<form class="vex-dialog-form">\n    <ng-container *ngComponentOutlet="context.content"></ng-container>\n    <vex-dialog-buttons [buttons]="context.buttons"\n                        (onButtonClick)="onButtonClick($event)"></vex-dialog-buttons>\n</form>'}]}],t.ctorParameters=function(){return[{type:o.DialogRef}]},t}(),a=function(){function t(t){this.dialog=t,this.context=t.context}return t.decorators=[{type:n.Component,args:[{selector:"drop-in-dialog",encapsulation:n.ViewEncapsulation.None,template:'<div class="vex-dialog-message">{{context.message}}</div>\n <div *ngIf="context.showInput" class="vex-dialog-input">\n   <input #input\n          autofocus\n          name="vex" \n          type="text" \n          class="vex-dialog-prompt-input"\n           (change)="context.defaultResult = input.value" \n          placeholder="{{context.placeholder}}">\n </div>\n <div *ngIf="context.showCloseButton" \n      [class]="context.closeClassName"\n      (click)="dialog.dismiss()"></div>'}]}],t.ctorParameters=function(){return[{type:o.DialogRef}]},t}(),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l={className:"default",overlayClassName:"vex-overlay",contentClassName:"vex-content",closeClassName:"vex-close"},u=["className","overlayClassName","contentClassName","closeClassName","showCloseButton"],p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.normalize=function(){this.className||(this.className=l.className),this.overlayClassName||(this.overlayClassName=l.overlayClassName),this.contentClassName||(this.contentClassName=l.contentClassName),this.closeClassName||(this.closeClassName=l.closeClassName),t.prototype.normalize.call(this)},e}(o.ModalOpenContext),d=function(t){function e(e,n,r){return void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),t.call(this,o.extend(l,e||{}),o.arrayUnion(u,n||[]),r||p)||this}return c(e,t),e.prototype.overlayClosesOnClick=function(t){return this[o.privateKey("isBlocking")]=!t,this},e}(o.ModalOpenContextBuilder),f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=["content"],m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e}(p),v=function(t){function e(e,n,r,i){return void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===i&&(i=void 0),t.call(this,o.extend({modal:e,component:s,buttons:[],defaultResult:!0},n||{}),o.arrayUnion(y,r||[]),i||m)||this}return f(e,t),e.prototype.addButton=function(t,e,n){var r={cssClass:t,caption:e,onClick:n};return this[o.privateKey("buttons")].push(r),this},e.prototype.addOkButton=function(t){return void 0===t&&(t="OK"),this.addButton("vex-dialog-button-primary vex-dialog-button vex-first",t,function(t,e){return t.dialog.close(t.dialog.context.defaultResult)}),this},e.prototype.addCancelButton=function(t){return void 0===t&&(t="CANCEL"),this.addButton("vex-dialog-button-secondary vex-dialog-button vex-last",t,function(t,e){return t.dialog.dismiss()}),this},e}(d),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g={component:s,content:a,okBtn:"OK",cancelBtn:"Cancel"},x=["okBtn","cancelBtn","placeholder"],C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),Object.defineProperty(e.prototype,"showInput",{get:function(){return this.dropInType===o.DROP_IN_TYPE.prompt},enumerable:!0,configurable:!0}),e}(m),b=function(t){function e(e,n,r){return void 0===r&&(r=void 0),t.call(this,e,o.extend(o.extend({modal:e,dropInType:n},g),r||{}),x,C)||this}return h(e,t),e.prototype.$$beforeOpen=function(e){switch(e.okBtn&&this.addOkButton(e.okBtn),e.dropInType){case o.DROP_IN_TYPE.prompt:e.defaultResult=void 0;case o.DROP_IN_TYPE.confirm:e.cancelBtn&&this.addCancelButton(e.cancelBtn)}return t.prototype.$$beforeOpen.call(this,e)},e}(v),_=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.apply=function(t){t.setClickBoundary(this.vexContentContainer.nativeElement),this.dialog.inElement&&(this.setStyle("padding","20px 0 0 0"),"bottom-right-corner"===this.dialog.context.className&&(this.setStyle("overflow-y","hidden"),this.renderer.setElementStyle(this.vexContentContainer.nativeElement,"position","absolute")))},e.decorators=[{type:n.Component,args:[{selector:"css-dialog-container",host:{tabindex:"-1",role:"dialog"},encapsulation:n.ViewEncapsulation.None,template:'<div #clickBoundary class="{{dialog.context.contentClassName}}"><ng-content></ng-content></div>'}]}],e.ctorParameters=function(){return[]},e.propDecorators={vexContentContainer:[{type:n.ViewChild,args:["clickBoundary",{read:n.ElementRef}]}]},e}(o.CSSDialogContainer),B=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),N=!("undefined"==typeof document||!document),k=!1,P=function(t){function r(e){return t.call(this,e)||this}return B(r,t),r.prototype.alert=function(){return new b(this,o.DROP_IN_TYPE.alert,{isBlocking:!1})},r.prototype.prompt=function(){return new b(this,o.DROP_IN_TYPE.prompt,{isBlocking:!0,keyboard:null})},r.prototype.confirm=function(){return new b(this,o.DROP_IN_TYPE.confirm,{isBlocking:!0,keyboard:null})},r.prototype.create=function(t,e){var n=this;if(!0===k)return this.createV3(t,e);var r=this.createBackdrop(t,o.CSSBackdrop),i=this.createContainer(t,O,e),s=t.overlayRef.instance,a=r.instance,c=i.instance;return t.inElement?(s.insideElement(),s.setContainerStyle("position","relative").setContainerStyle("height","100%").setContainerStyle("width","100%"),a.setStyle("position","absolute").setStyle("display","block").setStyle("height","100%").setStyle("width","100%"),c.setStyle("position","relative").setStyle("display","block").setStyle("height","100%").setStyle("width","100%")):s.fullscreen(),N&&!document.body.classList.contains("vex-open")&&document.body.classList.add("vex-open"),a.addClass("vex-overlay"),c.addClass("vex vex-theme-"+t.context.className),c.setStyle("display","block"),i.location.nativeElement&&i.location.nativeElement.focus(),s.beforeDestroy(function(){a.addClass("vex-closing"),c.addClass("vex-closing");var e=new o.PromiseCompleter;return a.myAnimationEnd$().subscribe(function(o){N&&1===n.overlay.groupStackLength(t)&&document.body.classList.remove("vex-open"),e.resolve()}),e.promise}),c.apply(s),t},r.prototype.createV3=function(t,n){var r=this,i=this.createBackdrop(t,o.CSSBackdrop),s=this.createContainer(t,o.CSSDialogContainer,n),a=t.overlayRef.instance,c=i.instance,l=s.instance;return t.inElement?a.insideElement():a.fullscreen(),N&&!document.body.classList.contains("vex-open")&&document.body.classList.add("vex-open"),a.addClass("vex vex-theme-"+t.context.className),c.addClass("vex-overlay"),l.addClass(t.context.contentClassName),l.setStyle("display","block"),t.inElement&&(a.setStyle("padding","0"),l.setStyle("margin-top","20px")),s.location.nativeElement&&s.location.nativeElement.focus(),"bottom-right-corner"===t.context.className&&(a.setStyle("overflow-y","hidden"),l.setStyle("position","absolute")),a.beforeDestroy(function(){a.addClass("vex-closing");var n=new o.PromiseCompleter,i=l.myAnimationEnd$();return"bottom-right-corner"!==t.context.className&&(i=e.combineLatest.call(i,c.myAnimationEnd$(),function(t,e){return[t,e]})),i.subscribe(function(e){N&&1===r.overlay.groupStackLength(t)&&document.body.classList.remove("vex-open"),n.resolve()}),n.promise}),a.setClickBoundary(s.location.nativeElement),t},r.decorators=[{type:n.Injectable}],r.ctorParameters=function(){return[{type:o.Overlay}]},r}(o.Modal),E=[{provide:o.Modal,useClass:P},{provide:P,useClass:P}],w=function(){function t(){}return t.getProviders=function(){return E},t.decorators=[{type:n.NgModule,args:[{imports:[o.ModalModule,r.CommonModule],declarations:[O,i,a,s],providers:E,entryComponents:[O,s,a]}]}],t.ctorParameters=function(){return[]},t}();t.Modal=P,t.vexV3Mode=function(){k=!0},t.VEXModalContext=p,t.VEXModalContextBuilder=d,t.DropInPreset=C,t.DropInPresetBuilder=b,t.DialogFormModal=s,t.FormDropIn=a,t.VEXDialogButtons=i,t.DialogPreset=m,t.DialogPresetBuilder=v,t.VexModalModule=w,t.providers=E,t.ɵa=O,Object.defineProperty(t,"__esModule",{value:!0})});